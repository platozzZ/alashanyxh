(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"21b6":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=o("da42"),r={data:function(){return{test:"../../static/image/banner2.png",TabCur:0,tabItem:[{title:"全部",id:1},{title:"待支付",id:2},{title:"已支付",id:3},{title:"已取消",id:4}],list:[],status:"more",scrollTop:0,statustext:[{status:10,text:"未支付"},{status:20,text:"支付完成"},{status:30,text:"已取消"}],orderData:{page:1,rows:10,type:1},lastPage:0,isFirst:!0}},onLoad:function(t){n=this,console.log(getApp().globalData),n.getOrderList(n.orderData)},onShow:function(){if(console.log("onShow"),console.log(n.isFirst),!n.isFirst){var t={page:1,rows:10,type:1};n.getOrderList(t)}},onPullDownRefresh:function(){n.orderData.page=1,console.log(n.orderData),n.getOrderList(n.orderData)},onReachBottom:function(){console.log(n.orderData),n.lastPage>=n.orderData.page?n.getOrderList(n.orderData):n.status="noMore"},methods:{getOrderList:function(e){(0,a.getOrderList)(e).then((function(o){if(console.log("getOrderList",o),1e3==o.data.rspInfo.rspCode){var a=o.data.rspData;if(n.lastPage=a.last_page,1==e.page&&(n.list=[]),n.list=n.list.concat(a.list),t.stopPullDownRefresh(),n.orderData.page++,0==a.list.length||e.page==a.last_page)return void(n.status="noMore");n.status="more"}else n.showToast(o.data.rspInfo.rspDesc)})).catch((function(t){n.showToast(t.text),console.log(t)}))},cancelOrder:function(e){(0,a.cancelOrder)(e).then((function(e){console.log("cancelOrder",e),1e3==e.data.rspInfo.rspCode?t.showToast({title:"取消成功",icon:"success",success:function(){setTimeout((function(){n.orderData.page=1,console.log(n.orderData),n.getOrderList(n.orderData)}),1500)}}):n.showToast(e.data.rspInfo.rspDesc)})).catch((function(t){n.showToast(t.text),console.log(t)}))},tabSelect:function(t,e){if(n.TabCur!=e){n.TabCur=e,n.orderData.type=t.id,n.orderData.page=1;var o={page:1,rows:10,type:t.id};n.getOrderList(o)}},toDetail:function(e){t.navigateTo({url:"./orderDetail?id="+e})},toPay:function(e){t.navigateTo({url:"../pay/pay?id="+e+"&from=order"})},toCancel:function(e){t.showModal({title:"提示",content:"确定要取消订单吗？",success:function(t){if(t.confirm){var o={orderid:e};n.cancelOrder(o)}}})},onPageScroll:function(t){var e=t.scrollTop;n.scrollTop=e},getStatus:function(t){var e=n.statustext.filter((function(e){return e.status==t}));return e[0].text},newGuid:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+t()+"-"+t()+t()+t()).toUpperCase()},showToast:function(e){t.showToast({title:e,icon:"none",mask:!0,duration:2e3})}}};e.default=r}).call(this,o("543d")["default"])},"5b84":function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return n}));var n={esayLoadimage:function(){return o.e("components/esay-loadimage/esay-loadimage").then(o.bind(null,"0334"))},uniLoadMore:function(){return o.e("components/uni-load-more/uni-load-more").then(o.bind(null,"0b04"))}},a=function(){var t=this,e=t.$createElement,o=(t._self._c,t.list.length>0?t.__map(t.list,(function(e,o){var n=t.__get_orig(e),a=t.getStatus(e.l_orderstatus);return{$orig:n,m0:a}})):null);t.$mp.data=Object.assign({},{$root:{l0:o}})},r=[]},"68d4":function(t,e,o){"use strict";o.r(e);var n=o("5b84"),a=o("9bfb");for(var r in a)"default"!==r&&function(t){o.d(e,t,(function(){return a[t]}))}(r);o("e427");var s,i=o("f0c5"),u=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=u.exports},"9bfb":function(t,e,o){"use strict";o.r(e);var n=o("21b6"),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},e427:function(t,e,o){"use strict";var n=o("f4be"),a=o.n(n);a.a},f4be:function(t,e,o){},ffb5:function(t,e,o){"use strict";(function(t){o("abd0");n(o("66fd"));var e=n(o("68d4"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])}},[["ffb5","common/runtime","common/vendor"]]]);