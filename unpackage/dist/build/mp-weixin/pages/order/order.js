(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"3fb9":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,n=o("71ae"),r={data:function(){return{test:"../../static/image/banner2.png",TabCur:0,tabItem:[{title:"全部",id:1},{title:"待支付",id:2},{title:"已支付",id:3},{title:"已取消",id:4}],list:[],status:"more",scrollTop:0,statustext:[{status:10,text:"未支付"},{status:20,text:"支付完成"},{status:30,text:"已取消"}],orderData:{page:1,rows:10,type:1},lastPage:0,isFirst:!0}},onLoad:function(t){a=this,console.log(getApp().globalData),a.getOrderList(a.orderData)},onShow:function(){if(console.log("onShow"),console.log(a.isFirst),!a.isFirst){var t={page:1,rows:10,type:1};a.getOrderList(t)}},onPullDownRefresh:function(){a.orderData.page=1,console.log(a.orderData),a.getOrderList(a.orderData)},onReachBottom:function(){console.log(a.orderData),a.lastPage>=a.orderData.page?a.getOrderList(a.orderData):a.status="noMore"},methods:{getOrderList:function(e){(0,n.getOrderList)(e).then((function(o){if(console.log("getOrderList",o),1e3==o.data.rspInfo.rspCode){var n=o.data.rspData;if(a.lastPage=n.last_page,1==e.page&&(a.list=[]),a.list=a.list.concat(n.list),t.stopPullDownRefresh(),a.orderData.page++,0==n.list.length||e.page==n.last_page)return void(a.status="noMore");a.status="more"}else a.showToast(o.data.rspInfo.rspDesc)})).catch((function(t){a.showToast(t.text),console.log(t)}))},cancelOrder:function(e){(0,n.cancelOrder)(e).then((function(e){console.log("cancelOrder",e),1e3==e.data.rspInfo.rspCode?t.showToast({title:"取消成功",icon:"success",success:function(){setTimeout((function(){a.orderData.page=1,console.log(a.orderData),a.getOrderList(a.orderData)}),1500)}}):a.showToast(e.data.rspInfo.rspDesc)})).catch((function(t){a.showToast(t.text),console.log(t)}))},tabSelect:function(t,e){if(a.TabCur!=e){a.TabCur=e,a.orderData.type=t.id,a.orderData.page=1;var o={page:1,rows:10,type:t.id};a.getOrderList(o)}},toDetail:function(e){t.navigateTo({url:"./orderDetail?id="+e})},toPay:function(e){t.navigateTo({url:"../pay/pay?id="+e+"&from=order"})},toCancel:function(e){t.showModal({title:"提示",content:"确定要取消订单吗？",success:function(t){if(t.confirm){var o={orderid:e};a.cancelOrder(o)}}})},onPageScroll:function(t){var e=t.scrollTop;a.scrollTop=e},getStatus:function(t){var e=a.statustext.filter((function(e){return e.status==t}));return e[0].text},newGuid:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+t()+"-"+t()+t()+t()).toUpperCase()},showToast:function(e){t.showToast({title:e,icon:"none",mask:!0,duration:2e3})}}};e.default=r}).call(this,o("543d")["default"])},"7aaa":function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return a}));var a={esayLoadimage:function(){return o.e("components/esay-loadimage/esay-loadimage").then(o.bind(null,"92e2"))},uniLoadMore:function(){return o.e("components/uni-load-more/uni-load-more").then(o.bind(null,"18f3"))}},n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.list.length>0?t.__map(t.list,(function(e,o){var a=t.__get_orig(e),n=t.getStatus(e.l_orderstatus);return{$orig:a,m0:n}})):null);t.$mp.data=Object.assign({},{$root:{l0:o}})},r=[]},c951:function(t,e,o){"use strict";var a=o("cc96"),n=o.n(a);n.a},cbbd:function(t,e,o){"use strict";o.r(e);var a=o("7aaa"),n=o("dbe0");for(var r in n)"default"!==r&&function(t){o.d(e,t,(function(){return n[t]}))}(r);o("c951");var s,i=o("f0c5"),c=Object(i["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=c.exports},cc96:function(t,e,o){},dbe0:function(t,e,o){"use strict";o.r(e);var a=o("3fb9"),n=o.n(a);for(var r in a)"default"!==r&&function(t){o.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},eb1f:function(t,e,o){"use strict";(function(t){o("61ae");a(o("66fd"));var e=a(o("cbbd"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])}},[["eb1f","common/runtime","common/vendor"]]]);