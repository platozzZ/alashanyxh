(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/mySetting"],{"35a6":function(t,o,n){"use strict";n.r(o);var a=n("749a"),e=n.n(a);for(var c in a)"default"!==c&&function(t){n.d(o,t,(function(){return a[t]}))}(c);o["default"]=e.a},"749a":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a,e=n("71ae"),c=u(n("c4a2"));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){n.e("components/yq-avatar/yq-avatar").then(function(){return resolve(n("18cf"))}.bind(null,n)).catch(n.oe)},s={components:{avatar:r},data:function(){return{password:"",oldPassword:"",url:"https://enroll-api.activitysign.com/3/img/avatar.png",test:"../../static/image/banner2.png",list:"",userInfo:"",userData:"",isFirst:!0,showAvatar:!1}},onLoad:function(o){a=this;var n=t.getStorageSync("userInfo");n&&(a.userInfo=n),a.initValidate()},onShow:function(){console.log("onShow")},methods:{myUpload:function(o){console.log(o);var n={avatar:o.base64,user_id:a.userInfo.user_id};(0,e.updateAvatar)(n).then((function(o){if(console.log("updateAvatar",o),201==o.data.code){a.showToast(o.data.data);var n=a,e=n.userInfo;e.avatar=o.data.status,t.setStorageSync("userInfo",e)}else a.showToast(o.data.data)})).catch((function(t){a.showToast(t.text),console.log(t)}))},toggle:function(t){a.$refs.popup.open()},cancel:function(){a.$refs.popup.close()},showToast:function(o){t.showToast({title:o,icon:"none",mask:!0,duration:2e3})},changeAvatar:function(t){console.log(t),a.$nextTick((function(){console.log(a.$refs),a.$refs.avatar.fChooseImg("",{selWidth:"350upx",selHeight:"350upx",inner:!1,canRotate:!1})}))},hideAvatar:function(t){console.log(t),a.showAvatar=t},changPwd:function(t){(0,e.updateAvatar)(t).then((function(t){console.log("changPwd",t),201==t.data.code?(a.showToast(t.data.data),a.cancel()):a.showToast(t.data.message)})).catch((function(t){a.showToast(t.text),console.log(t)}))},pwdSubmit:function(t){console.log(t);var o=t.detail.value;if(!a.WxValidate.checkForm(o)){var n=a.WxValidate.errorList[0];return console.log(n),void a.showToast(n.msg)}a.changPwd(o)},logOut:function(){(0,e.logOut)().then((function(o){console.log("logOut",o),200==o.data.code?(t.removeStorageSync("token"),t.removeStorageSync("userInfo"),t.removeStorageSync("phone"),t.showToast({title:o.data.data,duration:2e3,icon:"none",success:function(){setTimeout((function(){t.navigateBack()}),2e3)}})):a.showToast(o.data.data)})).catch((function(t){a.showToast(t.text),console.log(t)}))},modalTap:function(o){t.showModal({title:"提示",content:"确定退出登录吗？",success:function(t){t.confirm&&a.logOut()}})},_navigateTo:function(o){console.log(o),t.navigateTo({url:o})},initValidate:function(t){var o={password:{required:!0},oldPassword:{required:!0},user_id:{required:!0}},n={password:{required:"密码不能为空"},oldPassword:{required:"原始密码不能为空"},user_id:{required:"未知错误，请刷新页面重试"}};a.WxValidate=new c.default(o,n)}}};o.default=s}).call(this,n("543d")["default"])},"78c9":function(t,o,n){"use strict";(function(t){n("61ae");a(n("66fd"));var o=a(n("f673"));function a(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("543d")["createPage"])},bc93:function(t,o,n){"use strict";n.d(o,"b",(function(){return e})),n.d(o,"c",(function(){return c})),n.d(o,"a",(function(){return a}));var a={uniPopup:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(n.bind(null,"0043"))}},e=function(){var t=this,o=t.$createElement;t._self._c},c=[]},e1ba:function(t,o,n){"use strict";var a=n("f706"),e=n.n(a);e.a},f673:function(t,o,n){"use strict";n.r(o);var a=n("bc93"),e=n("35a6");for(var c in e)"default"!==c&&function(t){n.d(o,t,(function(){return e[t]}))}(c);n("e1ba");var u,r=n("f0c5"),s=Object(r["a"])(e["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);o["default"]=s.exports},f706:function(t,o,n){}},[["78c9","common/runtime","common/vendor"]]]);