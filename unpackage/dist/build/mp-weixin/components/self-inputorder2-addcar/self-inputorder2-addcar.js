(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/self-inputorder2-addcar/self-inputorder2-addcar"],{1950:function(e,r,t){"use strict";t.r(r);var a=t("b507"),n=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(r,e,(function(){return a[e]}))}(o);r["default"]=n.a},"1a5d":function(e,r,t){"use strict";var a;t.d(r,"b",(function(){return n})),t.d(r,"c",(function(){return o})),t.d(r,"a",(function(){return a}));var n=function(){var e=this,r=e.$createElement;e._self._c},o=[]},"26f9":function(e,r,t){"use strict";var a=t("4690"),n=t.n(a);n.a},4690:function(e,r,t){},b507:function(e,r,t){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a,n=t("da42"),o=t("8426"),c=s(t("e5da"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){u(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var d={data:function(){return{carCx:o.carCx,courtryItem:o.citys,courtryIndex:0,carArray:[[],[]],carIndex:[-1,-1],userinfo:[],userextra:[],usercards:[],matchSetting:[],matchInfoDatas:"",carData:[],errIndex:null,errInfo:"",plArray:[[0,1,2,3,4,5,6,7,8],[0,1,2,3,4,5,6,7,8,9],["T","L"]],plIndex:[-1,-1,-1],uids:[],carCode:"",storageData:{},submitData:{},entryInfo:{},carInfo:[],racerInfo:[],isRequest:[],customBar:this.CustomBar}},props:{pIndex:{type:Number,default:0},isAdd:{type:Boolean,default:!1},mid:{type:String,default:""}},mounted:function(){a=this,a.getOrderSign(),a.initValidate(),console.log(a.pIndex),console.log(a.isAdd),console.log(a.mid);var r=a.carArray;r[0]=o.carCx[0],r[1]=o.carCx[1][0],a.carArray=r;var t=e.getStorageSync("matchSetting");a.matchSetting=t.usercargroups.carSetting[a.pIndex].setting,console.log(a.matchSetting);var n=e.getStorageSync("carInfo");console.log(n),a.carInfo=n},methods:{carCodeInput:function(e){console.log(e),setTimeout((function(){var r=e.detail.value;/[^a-zA-Z0-9]/g.test(r)&&(r=r.replace(/[^a-zA-Z0-9]/g,"")),console.log(r),/^[A-Z\d]+$/.test(r)||(r=r.toUpperCase()),console.log(r),a.carCode=r}),3)},bindPickerChange:function(e){a.courtryIndex=e.target.value},getOrderSign:function(){var r=this;console.log(a),console.log(a.mid);var t={mid:a.mid};(0,n.getOrderSign)(t).then((function(t){console.log("getOrderSign:",t);var n=t.data;if(1e3==n.rspInfo.rspCode){a.matchInfoDatas=n.rspData;var o=n.rspData.userinfo.map((function(e){var r={field:e.field,desc:e.desc,value:"",show:e.desc+"不能为空"};return r})),c=n.rspData.usercards.map((function(e){var r={field:e.field,desc:e.desc,value:"",show:e.desc+"不能为空"};return r})),s=n.rspData.userextra.map((function(e){var r;return r="picload"!=e.type?{title:e.title,type:e.type,validate:e.validate,item:e.item,value:"",show:e.title+"不能为空"}:{title:e.title,type:e.type,validate:e.validate,item:e.item,value:"https://enroll-api.activitysign.com/3/images/add-icon.png",show:e.title+"不能为空"},r}));r.userinfo=o,r.usercards=c,r.userextra=s,console.log("userinfo:",o),console.log("usercards:",c),console.log("userextra:",s);for(var i=a.matchSetting.length,l=[],u=function(e){var r=JSON.stringify(e),t=JSON.parse(r);return t},d=[],f=0;f<i;f++){var g={userinfo:u(o),usercards:u(c),userextra:u(s),required:a.matchSetting[f].required};l.push(g),d.push(-1)}if(console.log("isRequest:",d),a.isRequest=d,console.log("carData:",l),a.isAdd)a.carData=l,a.setStorageSyncs("carData"+a.pIndex,l);else{var p=e.getStorageSync("carData"+a.pIndex);a.carData=p}}else a.showToast(n.rspInfo.rspDesc)})).catch((function(e){a.showToast(e.text),console.log(e)}))},addSubmit:function(e){var r=e.detail.value;if(!a.WxValidate.checkForm(r)){var t=this.WxValidate.errorList[0];return console.log(t),void this.showToast(t.msg)}console.log(e);var n=l({pindex:a.pIndex,carIndex:a.carIndex,plIndex:a.plIndex,courtryIndex:a.courtryIndex},r);console.log("storageData:",n),a.storageData=n,console.log(a.carData);for(var o=!1,c=a,s=(c.carInfo,c.carData),i=0;i<s.length;i++){for(var u=0;u<s[i].userinfo.length;u++){if(console.log(i,u),console.log(s[i].userinfo[u].value),"1"==s[i].required&&!s[i].userinfo[u].value)return void a.showToast(s[i].userinfo[u].show);if("mobile"==s[i].userinfo[u].field&&(console.log(a.tel(s[i].userinfo[u].value)),!a.tel(s[i].userinfo[u].value)))return a.showToast("请输入正确的手机号"),void(o=!0)}for(var d=0;d<s[i].usercards.length;d++){if(!s[i].usercards[d].value)return a.showToast(s[i].usercards[d].show),void(o=!0);if("idcard"==s[i].usercards[d].field&&(console.log(s[i].usercards[d].value),console.log(a.idcard(s[i].usercards[d].value)),!a.idcard(s[i].usercards[d].value)))return a.showToast("请输入正确的身份证号"),void(o=!0)}if(o)return;var f={userinfo:JSON.stringify(s[i].userinfo),usercards:JSON.stringify(s[i].usercards),userextra:JSON.stringify(s[i].userextra)};a.checkMember(f,i)}},checkMember:function(r,t){r.mid=a.mid,console.log(r),console.log(t),(0,n.checkMember)(r).then((function(r){console.log("checkMember",r);var n=r.data;if(1e3==n.rspInfo.rspCode){a.errIndex=null;var o=a,c=o.carInfo,s=(o.entryInfo,o.storageData),i=(o.matchSetting,o.carData),l=o.isRequest;if(c[a.pIndex].brand=s.brand,c[a.pIndex].carnumbber=s.carnumbber,c[a.pIndex].displacement=s.displacement,c[a.pIndex].model=s.model,c[a.pIndex].racer_info.map((function(e,r){r==t&&(e.racerid=n.rspData.uid,e.racername=i[t].userinfo[0].value)})),console.log(c),a.carInfo=c,e.setStorageSync("carInfo",c),l.splice(t,1,t),console.log(l),a.isRequest=l,l.includes(-1))return;a.setStorageSyncs("carTop"+a.pIndex,s),console.log("storageData:",s),a.setStorageSyncs("carData"+a.pIndex,a.carData),a.$emit("carinfo",c),a.$emit("isnexts",!0),a.close()}else a.errIndex=t,a.errInfo=n.rspInfo.rspDesc,a.showToast(n.rspInfo.rspDesc)})).catch((function(e){a.showToast(e.text),console.log(e)}))},carChange:function(e){console.log(e);var r=e.detail.value,t=[];t=r.map((function(e){return-1==e?0:e})),a.carIndex=t},carColumnChange:function(e){switch(a.carIndex[e.detail.column]=e.detail.value,e.detail.column){case 0:a.carArray[1]=o.carCx[1][e.detail.value],a.carIndex.splice(1,1,0);break}},plChange:function(e){console.log(e);var r=e.detail.value,t=[];t=r.map((function(e){return-1==e?0:e})),console.log(t),a.plIndex=t},close:function(){a.$emit("close"),a.storageData={}},setStorageSyncs:function(r,t){console.log("setStorageSync:",r),console.log("setStorageSync:",t),e.setStorageSync(r,t)},tel:function(e){return/^([1][3,5,6,7,8,9])\d{9}$/.test(e)},idcard:function(e){return/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},showToast:function(r){e.showToast({title:r,icon:"none",mask:!0,duration:2e3})},initValidate:function(e){var r={carcode:{required:!0,minlength:6,maxlength:6},brand:{required:!0},model:{required:!0},displacement1:{required:!0},displacement2:{required:!0},displacement3:{required:!0}},t={carcode:{required:"车牌号不能为空",minlength:"请输入正确的车牌号",maxlength:"请输入正确的车牌号"},brand:{required:"请选择车型"},model:{required:"请选择车型"},displacement1:{required:"请选择排量"},displacement2:{required:"请选择排量"},displacement3:{required:"请选择排量"}};a.WxValidate=new c.default(r,t)}}};r.default=d}).call(this,t("543d")["default"])},dd7b:function(e,r,t){"use strict";t.r(r);var a=t("1a5d"),n=t("1950");for(var o in n)"default"!==o&&function(e){t.d(r,e,(function(){return n[e]}))}(o);t("26f9");var c,s=t("f0c5"),i=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);r["default"]=i.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/self-inputorder2-addcar/self-inputorder2-addcar-create-component',
    {
        'components/self-inputorder2-addcar/self-inputorder2-addcar-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("dd7b"))
        })
    },
    [['components/self-inputorder2-addcar/self-inputorder2-addcar-create-component']]
]);
