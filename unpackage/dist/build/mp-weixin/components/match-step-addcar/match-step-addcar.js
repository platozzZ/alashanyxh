(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/match-step-addcar/match-step-addcar"],{"14a1":function(e,r,t){"use strict";var n=t("b134"),a=t.n(n);a.a},"1d3c":function(e,r,t){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,a=t("71ae"),o=t("d593"),c=i(t("c4a2"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var u={data:function(){return{courtryItem:o.citys,courtryIndex:0,carArray:[[],[]],carIndex:[0,0],userinfo:[],userextra:[],usercards:[],matchSetting:[],matchInfoDatas:"",carData:[],errIndex:null,errInfo:"",plArray:[[0,1,2,3,4,5,6,7,8],[0,1,2,3,4,5,6,7,8,9],["T","L"]],plIndex:[2,0,0],uids:[],carcode:"",storageData:{},submitData:{},entryInfo:{},carInfo:[],racerInfo:[],isRequest:[],list:[],customBar:this.CustomBar}},props:{pIndex:{type:Number,default:0},isAdd:{type:Boolean,default:!1},mid:{type:String,default:""}},beforeCreate:function(){},mounted:function(){n=this,n.initValidate(),console.log(n.pIndex),console.log(n.isAdd),console.log(o.carCx);var r=[[],[]];r[0]=o.carCx[0],r[1]=o.carCx[1][0],n.carArray=r,console.log(this.carArray),n.list=[],n.add();var t=e.getStorageSync("carInfo");console.log(t),t&&(n.carInfo=t)},onShow:function(){console.log("onShow")},methods:{bindPickerChange:function(e){n.courtryIndex=e.target.value},getOrderSign:function(){var r=this;console.log(n.$route.query);var t={mid:n.$route.query.mid};(0,a.getOrderSign)(t).then((function(t){console.log("getOrderSign:",t);var a=t.data;if(1e3==a.rspInfo.rspCode){n.matchInfoDatas=a.rspData;var o=a.rspData.userinfo.map((function(e){var r={field:e.field,desc:e.desc,value:"",show:e.desc+"不能为空"};return r})),c=a.rspData.usercards.map((function(e){var r={field:e.field,desc:e.desc,value:"",show:e.desc+"不能为空"};return r})),i=a.rspData.userextra.map((function(e){var r;return r="picload"!=e.type?{title:e.title,type:e.type,validate:e.validate,item:e.item,value:"",show:e.title+"不能为空"}:{title:e.title,type:e.type,validate:e.validate,item:e.item,value:"https://enroll-api.activitysign.com/3/images/add-icon.png",show:e.title+"不能为空"},r}));r.userinfo=o,r.usercards=c,r.userextra=i,console.log("userinfo:",o),console.log("usercards:",c),console.log("userextra:",i);for(var s=n.matchSetting.length,l=[],d=function(e){var r=JSON.stringify(e),t=JSON.parse(r);return t},u=[],f=0;f<s;f++){var p={userinfo:d(o),usercards:d(c),userextra:d(i),required:n.matchSetting[f].required};l.push(p),u.push(-1)}if(console.log("isRequest:",u),n.isRequest=u,console.log("carData:",l),n.isAdd)n.carData=l,n.setStorageSyncs("carData"+n.pIndex,l);else{var g=e.getStorageSync("carData"+n.pIndex);n.carData=g}}else n.showToast(a.rspInfo.rspDesc)})).catch((function(e){n.showToast(e.text),console.log(e)}))},addSubmit:function(e){var r=e.detail.value;if(!n.WxValidate.checkForm(r)){var t=this.WxValidate.errorList[0];return console.log(t),void this.showToast(t.msg)}console.log(e);var a=n,o=(a.carInfo,a.carData,a.list),c=l(l({pindex:n.pIndex,carIndex:n.carIndex,plIndex:n.plIndex,courtryIndex:n.courtryIndex},r),{},{list:o});console.log("storageData:",c),n.storageData=c;console.log(o);for(var i=0;i<o.length;i++){if(!(o[i].name&&o[i].idcard&&o[i].mobile))return n.errIndex=i,void(n.errInfo="请正确填写信息");if(!n.idcard(o[i].idcard))return n.errIndex=i,void(n.errInfo="请输入正确的身份证号");if(!n.tel(o[i].mobile))return n.errIndex=i,void(n.errInfo="请输入正确的手机号");n.errIndex=null,n.errInfo=""}var s={userinfo:JSON.stringify(o),mid:n.mid};console.log(s),n.checkMember20(s)},checkMember20:function(r){console.log(r),(0,a.checkMember20)(r).then((function(r){console.log("checkMember",r);var t=r.data;if(1e3==t.rspInfo.rspCode){var a=n,o=a.carInfo,c=(a.entryInfo,a.storageData),i=(a.matchSetting,a.carData,a.isRequest,{brand:"",model:"",displacement:"",color:"",carnumbber:"",racer_info:[]});i.brand=c.brand,i.carnumbber=c.carnumbber,i.displacement=c.displacement,i.model=c.model,t.rspData.map((function(e,r){c.list.map((function(r,t){r.idcard==e.idcard&&(0==t?i.racer_info.push({racerid:e.uid,roleid:"3",racername:r.name,role:"赛手"}):i.racer_info.push({racerid:e.uid,roleid:"4",racername:r.name,role:"乘客"}))}))})),o.push(i),n.carInfo=o,e.setStorageSync("carInfo",o),console.log(o),n.$emit("carinfos",o),n.close()}else n.showToast(t.rspInfo.rspDesc)})).catch((function(e){n.showToast(e.text),console.log(e)}))},checkMember:function(e){function r(r,t){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(r,t){r.mid=n.$route.query.mid,console.log(r),console.log(t),checkMember(r).then((function(r){console.log("checkMember",r);var a=r.data;if(1e3==a.rspInfo.rspCode){n.errIndex=null;var o=n,c=o.carInfo,i=(o.entryInfo,o.storageData),s=(o.matchSetting,o.carData),l=o.isRequest;if(c[n.pIndex].brand=i.brand,c[n.pIndex].carnumbber=i.carnumbber,c[n.pIndex].displacement=i.displacement,c[n.pIndex].model=i.model,c[n.pIndex].racer_info.map((function(e,r){r==t&&(e.racerid=a.rspData.uid,e.racername=s[t].userinfo[0].value)})),console.log(c),n.carInfo=c,e.setStorageSync("carInfo",c),l.splice(t,1,t),console.log(l),n.isRequest=l,l.includes(-1))return;n.setStorageSyncs("carTop"+n.pIndex,i),console.log("storageData:",i),n.setStorageSyncs("carData"+n.pIndex,n.carData),n.$emit("carinfo",c),n.$emit("isnexts",!0),n.close()}else n.errIndex=t,n.errInfo=a.rspInfo.rspDesc,n.showToast(a.rspInfo.rspDesc)})).catch((function(e){n.showToast(e.text),console.log(e)}))})),carChange:function(e){console.log(e);var r=e.detail.value;n.carIndex=r},carColumnChange:function(e){switch(n.carIndex[e.detail.column]=e.detail.value,e.detail.column){case 0:n.carArray[1]=o.carCx[1][e.detail.value],n.carIndex.splice(1,1,0);break}},plChange:function(e){console.log(e);var r=e.detail.value,t=[];t=r.map((function(e){return-1==e?0:e})),console.log(t),n.plIndex=t},close:function(){n.$emit("close"),n.storageData={}},setStorageSyncs:function(r,t){console.log("setStorageSync:",r),console.log("setStorageSync:",t),e.setStorageSync(r,t)},add:function(){var e={name:"",idcard:"",mobile:""};n.list.push(e)},deleteList:function(r){console.log(r),e.showModal({title:"提示",content:"确定删除吗？",success:function(t){t.confirm&&(e.showLoading(),setTimeout((function(){n.list.splice(r,1),e.hideLoading()}),1e3))}})},tel:function(e){return/^([1][3,5,6,7,8,9])\d{9}$/.test(e)},idcard:function(e){return/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},showToast:function(r){e.showToast({title:r,icon:"none",mask:!0,duration:2e3})},initValidate:function(e){var r={carcode:{required:!0,minlength:6,maxlength:6},brand:{required:!0},model:{required:!0},displacement1:{required:!0},displacement2:{required:!0},displacement3:{required:!0}},t={carcode:{required:"车牌号不能为空",minlength:"请输入正确的车牌号",maxlength:"请输入正确的车牌号"},brand:{required:"请选择车型"},model:{required:"请选择车型"},displacement1:{required:"请选择排量"},displacement2:{required:"请选择排量"},displacement3:{required:"请选择排量"}};n.WxValidate=new c.default(r,t)}}};r.default=u}).call(this,t("543d")["default"])},"93a6":function(e,r,t){"use strict";t.r(r);var n=t("9c7b"),a=t("ef89");for(var o in a)"default"!==o&&function(e){t.d(r,e,(function(){return a[e]}))}(o);t("14a1");var c,i=t("f0c5"),s=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);r["default"]=s.exports},"9c7b":function(e,r,t){"use strict";var n;t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return o})),t.d(r,"a",(function(){return n}));var a=function(){var e=this,r=e.$createElement;e._self._c},o=[]},b134:function(e,r,t){},ef89:function(e,r,t){"use strict";t.r(r);var n=t("1d3c"),a=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(r,e,(function(){return n[e]}))}(o);r["default"]=a.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/match-step-addcar/match-step-addcar-create-component',
    {
        'components/match-step-addcar/match-step-addcar-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("93a6"))
        })
    },
    [['components/match-step-addcar/match-step-addcar-create-component']]
]);
